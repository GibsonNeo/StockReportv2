join_key: ticker
join_type: inner

formatting:
  enabled: true
  insert_combined_after_column: sector_A
  freeze_header: true
  add_autofilter: true
  autosize_columns: true
  autosize_sample_rows: 1000
  autosize_padding_chars: 2
  visible_columns: [ticker, type, sector_A, combined_z_percent_0_to_100, mom_12_1_spdji, ulcer_12_1, max_dd_12_1, trend_consistency, grade_score, foreign_grade_score]


scoring:
  mode: standardized
  map_to: percentile_0_100

standardization:
  default_method: zscore          # zscore for most metrics, robust_z for risk below
  default_clip_z: 3.0             # gentle cap so one extreme does not swamp the blend
  default_pct_floor: 0.01
  default_pct_ceiling: 0.99

# Used only if you switch to quartile or both
n_quartiles: 4
decile_nudge: 0.25

grade_columns:
  - name: mom_12_1_spdji
    source_column: mom_12_1_spdji
    direction: higher_better
    weight: 5
    method: zscore
    #clip_z: 2.5

  - name: trend_consistency
    source_column: trend_consistency
    direction: higher_better
    weight: 1
    method: zscore
    clip_z: 2.0

  - name: grade_score
    source_column: grade_score
    direction: higher_better
    weight: 6
    method: zscore
    #clip_z: 2.5

  - name: foreign_grade_score
    source_column: foreign_grade_score
    direction: higher_better
    weight: 6
    method: zscore
    #clip_z: 2.5

  - name: ulcer_12_1
    source_column: ulcer_12_1
    direction: lower_better
    weight: 1
    method: zscore
    clip_z: 2.0

  - name: max_dd_12_1
    source_column: max_dd_12_1
    direction: lower_better
    weight: 1
    method: zscore
    transform: abs
    clip_z: 2.0
